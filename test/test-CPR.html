<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>simvent.js test page</title>
	<script src="../simvent.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.js"></script>

	<style>
		body {
			text-align:center;
		}

		.graph {
			width: 600px;
			height: 200px;
		}
	</style>
</head>

<body>

	<!--script src="http://jsconsole.com/js/remote.js?progrt"></script-->
	<script>
		function plot(data, x, y){
			
			$("body").append("<div id='graph"+x+y +"' class='graph'></div>");
			var placeholder = $("#graph"+x+y);
			function fxy(d){
				return [d[x], d[y]];
			}
			var dataset = {
				color: "darkblue",
				data: data.map(fxy),
				label: y
			}
			var plot = $.plot(placeholder, [dataset]);
		}

		var vent = new sv.VDR();
		vent.Tvent=24;
		vent.Tic = 3;
		vent.CPR=0.8;

		var lung1 = new sv.SimpleLung();

		console.log("simulation started");
		var data = vent.ventilate(lung1).timeData;
		
		console.log("simulation ended");
		plot(data,"time", "Pao");
		plot(data,"time", "Flung");
		plot(data,"time", "Vt");
		plot(data,"Palv", "Vt");
		console.log("graph ended");
		</script>

</body>

