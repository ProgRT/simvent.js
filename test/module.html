<!DOCTYPE html>
<meta charset="utf-8"/>

<script src="../lib/d3.v3.min.js" charset="utf-8"></script>
<link rel="stylesheet"
			type="text/css"
			href="https://progrt.github.io/graphsimple.js/css/gs.css"
			charset="utf-8"/>

<style>
body {
	box-sizing: border-box;
	padding: none;
	margin-top: none;
}

html {
	box-sizing: border-box;
	height: 100%;
	padding: 0px;
	margin: 0px;
}

svg.gs {
	/*border: 1px solid gray;*/
	display: block;
	width: 60vw;
	height: 50vw;
	margin-left: auto;
	margin-right: auto;
}
</style>

<body>

<script type=module>

	import {PressureControler} from '../src/simvent-ventilators.js';
	import {SptLung} from '../src/simvent-lungs.js';
	import { graph } from 'http://progrt.github.io/graphsimple.js/graphsimple.js';

	const graphParam = {
		padH: .25,
		margeG: 80,
		margeB: 30,
		margeH: 10,
	};

	var vent = new PressureControler({PEEP: 10, Fconv: 40});
	var lung = new SptLung();
	lung.Slope2 = .1;
	var data = vent.ventilate(lung).timeData;

	const fx = d=>d.time;
	const fy = d=>d.Flung;


	var gr = new graph(null, graphParam);
	gr.setscale(data, fx, fy)
		.tracer(data, fx, fy)

</script>
</body>
